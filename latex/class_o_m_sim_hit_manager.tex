\hypertarget{class_o_m_sim_hit_manager}{}\doxysection{OMSim\+Hit\+Manager Class Reference}
\label{class_o_m_sim_hit_manager}\index{OMSimHitManager@{OMSimHitManager}}


Manages detected photon information.  




\doxysubsection{Detailed Description}
This class is responsible for storing, managing, and providing access to the hit information related to detected photons across multiple optical modules. The manager can be accessed via a singleton pattern, ensuring a unified access point for photon hit data. \doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_o_m_sim_hit_manager_a004f73261c6ef3e30ff27b0e13da0a1b}{append\+Hit\+Info}} (G4double global\+Time, G4double local\+Time, G4double track\+Length, G4double energy, G4int PMTHit\+Number, G4\+Three\+Vector momentum\+Direction, G4\+Three\+Vector global\+Pos, G4\+Three\+Vector local\+Pos, G4double distance, \mbox{\hyperlink{struct_o_m_sim_p_m_t_response_1_1_p_m_t_pulse}{OMSim\+PMTResponse\+::\+PMTPulse}} response, G4int module\+Index=0)
\begin{DoxyCompactList}\small\item\em Appends hit information for a detected photon to the corresponding module\textquotesingle{}s hit data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_o_m_sim_hit_manager_a00bb034e7751905f8a8229de3f8a39b1}{reset}} ()
\begin{DoxyCompactList}\small\item\em Resets hit information for all modules. \end{DoxyCompactList}\item 
std\+::vector$<$ double $>$ \mbox{\hyperlink{class_o_m_sim_hit_manager_a94235892734a635dea9147aac72c313e}{count\+Hits}} (int module\+Index=0)
\begin{DoxyCompactList}\small\item\em Counts hits for a specified module. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_o_m_sim_hit_manager_aeabbd61eeb69b719cbb2adc85e6e0d6b}{set\+Number\+Of\+PMTs}} (int p\+Number\+Of\+PMTs, int module\+Index=0)
\begin{DoxyCompactList}\small\item\em Saves the number of PMTs in a module. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}} \mbox{\hyperlink{class_o_m_sim_hit_manager_a50074acb44cd2a8bacffe00599add044}{get\+Hits\+Of\+Module}} (int module\+Index=0)
\begin{DoxyCompactList}\small\item\em Retrieves the hit statistics for a specified module. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_o_m_sim_hit_manager_a853b6fb70a189840b7ffa42c74af5b09}{sort\+Hit\+Stats\+By\+Time}} (\mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}} \&l\+Hits)
\begin{DoxyCompactList}\small\item\em Sorts the hit statistics by the hit time. \end{DoxyCompactList}\item 
std\+::vector$<$ int $>$ \mbox{\hyperlink{class_o_m_sim_hit_manager_ae6b66371cdfbd30ba932e30fd769cbc4}{calculate\+Multiplicity}} (const G4double p\+Time\+Window, int module\+Number=0)
\begin{DoxyCompactList}\small\item\em Calculates the multiplicity of hits within a specified time window for a given module. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_o_m_sim_hit_manager}{OMSim\+Hit\+Manager}} \& \mbox{\hyperlink{class_o_m_sim_hit_manager_a50c9ec0b924aa860533de79aa6fd3a47}{get\+Instance}} ()
\begin{DoxyCompactList}\small\item\em Returns the singleton instance of the \mbox{\hyperlink{class_o_m_sim_hit_manager}{OMSim\+Hit\+Manager}}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_a004f73261c6ef3e30ff27b0e13da0a1b}\label{class_o_m_sim_hit_manager_a004f73261c6ef3e30ff27b0e13da0a1b}} 
\index{OMSimHitManager@{OMSimHitManager}!appendHitInfo@{appendHitInfo}}
\index{appendHitInfo@{appendHitInfo}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{appendHitInfo()}{appendHitInfo()}}
{\footnotesize\ttfamily void OMSim\+Hit\+Manager\+::append\+Hit\+Info (\begin{DoxyParamCaption}\item[{G4double}]{global\+Time,  }\item[{G4double}]{local\+Time,  }\item[{G4double}]{track\+Length,  }\item[{G4double}]{energy,  }\item[{G4int}]{PMTHit\+Number,  }\item[{G4\+Three\+Vector}]{momentum\+Direction,  }\item[{G4\+Three\+Vector}]{global\+Pos,  }\item[{G4\+Three\+Vector}]{local\+Pos,  }\item[{G4double}]{distance,  }\item[{\mbox{\hyperlink{struct_o_m_sim_p_m_t_response_1_1_p_m_t_pulse}{OMSim\+PMTResponse\+::\+PMTPulse}}}]{response,  }\item[{G4int}]{module\+Index = {\ttfamily 0} }\end{DoxyParamCaption})}

This method appends hit information to the corresponding module\textquotesingle{}s {\ttfamily \mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}}} structure in the manager. If the specified module number is not yet in the manager, a new {\ttfamily \mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}}} structure is created for it.


\begin{DoxyParams}{Parameters}
{\em global\+Time} & Time of detection. \\
\hline
{\em local\+Time} & Photon flight time. \\
\hline
{\em track\+Length} & Length of the photon\textquotesingle{}s path before hitting. \\
\hline
{\em energy} & Energy of the detected photon. \\
\hline
{\em PMTHit\+Number} & ID of the PMT that detected the photon. \\
\hline
{\em momentum\+Direction} & Momentum direction of the photon at the time of detection. \\
\hline
{\em global\+Pos} & Global position of the detected photon. \\
\hline
{\em local\+Pos} & Local position of the detected photon within the PMT. \\
\hline
{\em distance} & Distance between generation and detection of photon. \\
\hline
{\em response} & PMT\textquotesingle{}s response to the detected photon, encapsulated as a {\ttfamily PMTPulse}. \\
\hline
{\em module\+Number} & ID of the module in which the photon was detected. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_ae6b66371cdfbd30ba932e30fd769cbc4}\label{class_o_m_sim_hit_manager_ae6b66371cdfbd30ba932e30fd769cbc4}} 
\index{OMSimHitManager@{OMSimHitManager}!calculateMultiplicity@{calculateMultiplicity}}
\index{calculateMultiplicity@{calculateMultiplicity}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{calculateMultiplicity()}{calculateMultiplicity()}}
{\footnotesize\ttfamily std\+::vector$<$ int $>$ OMSim\+Hit\+Manager\+::calculate\+Multiplicity (\begin{DoxyParamCaption}\item[{const G4double}]{p\+Time\+Window,  }\item[{int}]{module\+Number = {\ttfamily 0} }\end{DoxyParamCaption})}

This method determines the multiplicity of hits for the specified optical module within a given time window. Multiplicity is defined as the number of PMTs detecting a hit within the time window. The result is a vector where each element represents the number of occurrences of a specific multiplicity.

For instance, if the resulting vector is \mbox{[}5, 3, 2\mbox{]}, it means\+:
\begin{DoxyItemize}
\item 5 occurrences of 1 PMT detecting a hit within the time window.
\item 3 occurrences of 2 PMTs detecting hits within the same window.
\item 2 occurrences of 3 PMTs detecting hits within the window.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em p\+Time\+Window} & The time window within which to calculate the multiplicity (in seconds). \\
\hline
{\em module\+Number} & The index of the module for which to calculate the multiplicity. Default is 0. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A vector containing the multiplicity data. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_a94235892734a635dea9147aac72c313e}\label{class_o_m_sim_hit_manager_a94235892734a635dea9147aac72c313e}} 
\index{OMSimHitManager@{OMSimHitManager}!countHits@{countHits}}
\index{countHits@{countHits}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{countHits()}{countHits()}}
{\footnotesize\ttfamily std\+::vector$<$ double $>$ OMSim\+Hit\+Manager\+::count\+Hits (\begin{DoxyParamCaption}\item[{int}]{module\+Index = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em module\+Index} & Index of the module for which to count hits. Default is 0. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A vector containing the hit count for each PMT in the specified module. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_a50074acb44cd2a8bacffe00599add044}\label{class_o_m_sim_hit_manager_a50074acb44cd2a8bacffe00599add044}} 
\index{OMSimHitManager@{OMSimHitManager}!getHitsOfModule@{getHitsOfModule}}
\index{getHitsOfModule@{getHitsOfModule}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{getHitsOfModule()}{getHitsOfModule()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}} OMSim\+Hit\+Manager\+::get\+Hits\+Of\+Module (\begin{DoxyParamCaption}\item[{int}]{module\+Index = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em module\+Index} & Index of the module for which to retrieve hit statistics. Default is 0. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}} structure containing hit information for the specified module. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_a50c9ec0b924aa860533de79aa6fd3a47}\label{class_o_m_sim_hit_manager_a50c9ec0b924aa860533de79aa6fd3a47}} 
\index{OMSimHitManager@{OMSimHitManager}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{getInstance()}{getInstance()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{class_o_m_sim_hit_manager}{OMSim\+Hit\+Manager}}\& OMSim\+Hit\+Manager\+::get\+Instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\begin{DoxyReturn}{Returns}
A reference to the singleton instance. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_a00bb034e7751905f8a8229de3f8a39b1}\label{class_o_m_sim_hit_manager_a00bb034e7751905f8a8229de3f8a39b1}} 
\index{OMSimHitManager@{OMSimHitManager}!reset@{reset}}
\index{reset@{reset}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void OMSim\+Hit\+Manager\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{class_o_m_sim_hit_manager_aeabbd61eeb69b719cbb2adc85e6e0d6b}\label{class_o_m_sim_hit_manager_aeabbd61eeb69b719cbb2adc85e6e0d6b}} 
\index{OMSimHitManager@{OMSimHitManager}!setNumberOfPMTs@{setNumberOfPMTs}}
\index{setNumberOfPMTs@{setNumberOfPMTs}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{setNumberOfPMTs()}{setNumberOfPMTs()}}
{\footnotesize\ttfamily void OMSim\+Hit\+Manager\+::set\+Number\+Of\+PMTs (\begin{DoxyParamCaption}\item[{int}]{p\+Number\+Of\+PMTs,  }\item[{int}]{module\+Index = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em p\+Number\+Of\+PMTs} & Nr of PMTs in OM \\
\hline
{\em p\+Module\+Index} & Module index for which we are getting the information (default 0) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_o_m_sim_hit_manager_a853b6fb70a189840b7ffa42c74af5b09}\label{class_o_m_sim_hit_manager_a853b6fb70a189840b7ffa42c74af5b09}} 
\index{OMSimHitManager@{OMSimHitManager}!sortHitStatsByTime@{sortHitStatsByTime}}
\index{sortHitStatsByTime@{sortHitStatsByTime}!OMSimHitManager@{OMSimHitManager}}
\doxysubsubsection{\texorpdfstring{sortHitStatsByTime()}{sortHitStatsByTime()}}
{\footnotesize\ttfamily void OMSim\+Hit\+Manager\+::sort\+Hit\+Stats\+By\+Time (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_hit_stats}{Hit\+Stats}} \&}]{l\+Hits }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em l\+Hits} & The hit statistics to be sorted. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_o_m_sim_hit_manager_8hh}{OMSim\+Hit\+Manager.\+hh}}\item 
\mbox{\hyperlink{_o_m_sim_hit_manager_8cc}{OMSim\+Hit\+Manager.\+cc}}\end{DoxyCompactItemize}
